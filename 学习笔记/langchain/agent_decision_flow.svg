<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: 'Courier New', monospace; font-size: 24px; font-weight: bold; fill: #333; }
      .decision { font-family: 'Courier New', monospace; font-size: 12px; font-weight: bold; fill: #333; }
      .action { font-family: 'Courier New', monospace; font-size: 11px; fill: #333; }
      .process { font-family: 'Courier New', monospace; font-size: 10px; fill: #666; }
    </style>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.2"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#fafafa"/>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="title">Agent Decision Making Process</text>
  <text x="600" y="65" text-anchor="middle" class="process">Dynamic Tool Selection and Execution</text>

  <!-- Start -->
  <ellipse cx="100" cy="150" rx="60" ry="30" fill="#FF8C42" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="100" y="155" text-anchor="middle" class="decision" fill="white">START</text>

  <!-- Decision 1: Query Analysis -->
  <polygon points="200,120 280,150 200,180 120,150" fill="#4472C4" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="200" y="145" text-anchor="middle" class="decision" fill="white">Query</text>
  <text x="200" y="160" text-anchor="middle" class="decision" fill="white">Analysis</text>

  <!-- Decision 2: Tool Selection -->
  <polygon points="400,120 480,150 400,180 320,150" fill="#4472C4" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="400" y="145" text-anchor="middle" class="decision" fill="white">Tool</text>
  <text x="400" y="160" text-anchor="middle" class="decision" fill="white">Selection</text>

  <!-- Decision 3: Execution Check -->
  <polygon points="600,120 680,150 600,180 520,150" fill="#4472C4" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="600" y="145" text-anchor="middle" class="decision" fill="white">Execution</text>
  <text x="600" y="160" text-anchor="middle" class="decision" fill="white">Check</text>

  <!-- Action: Use Calculator -->
  <rect x="700" y="250" width="140" height="80" rx="10" fill="#70AD47" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="770" y="275" text-anchor="middle" class="decision" fill="white">üßÆ Calculator</text>
  <text x="770" y="295" text-anchor="middle" class="action" fill="white">Perform</text>
  <text x="770" y="310" text-anchor="middle" class="action" fill="white">Mathematical</text>
  <text x="770" y="325" text-anchor="middle" class="action" fill="white">Calculations</text>

  <!-- Action: Use Search -->
  <rect x="850" y="250" width="140" height="80" rx="10" fill="#70AD47" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="920" y="275" text-anchor="middle" class="decision" fill="white">üîç Web Search</text>
  <text x="920" y="295" text-anchor="middle" class="action" fill="white">Search for</text>
  <text x="920" y="310" text-anchor="middle" class="action" fill="white">Information</text>
  <text x="920" y="325" text-anchor="middle" class="action" fill="white">on the Web</text>

  <!-- Action: Use Database -->
  <rect x="700" y="350" width="140" height="80" rx="10" fill="#70AD47" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="770" y="375" text-anchor="middle" class="decision" fill="white">üóÑÔ∏è Database</text>
  <text x="770" y="395" text-anchor="middle" class="action" fill="white">Query Local</text>
  <text x="770" y="410" text-anchor="middle" class="action" fill="white">Data Storage</text>
  <text x="770" y="425" text-anchor="middle" class="action" fill="white">or Knowledge</text>

  <!-- Action: Use API -->
  <rect x="850" y="350" width="140" height="80" rx="10" fill="#70AD47" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="920" y="375" text-anchor="middle" class="decision" fill="white">‚ö° API Call</text>
  <text x="920" y="395" text-anchor="middle" class="action" fill="white">Connect to</text>
  <text x="920" y="410" text-anchor="middle" class="action" fill="white">External</text>
  <text x="920" y="425" text-anchor="middle" class="action" fill="white">Services</text>

  <!-- Result Processing -->
  <rect x="400" y="500" width="200" height="80" rx="10" fill="#E7E6E6" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="500" y="525" text-anchor="middle" class="decision">Result Processing</text>
  <text x="500" y="545" text-anchor="middle" class="action">‚Ä¢ Validate Output</text>
  <text x="500" y="560" text-anchor="middle" class="action">‚Ä¢ Store in Memory</text>
  <text x="500" y="575" text-anchor="middle" class="action">‚Ä¢ Update Context</text>

  <!-- Success Check -->
  <polygon points="700,500 780,530 700,560 620,530" fill="#2E75B6" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="700" y="525" text-anchor="middle" class="decision" fill="white">Task</text>
  <text x="700" y="540" text-anchor="middle" class="decision" fill="white">Complete?</text>

  <!-- Final Output -->
  <rect x="900" y="500" width="150" height="80" rx="10" fill="#2E75B6" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="975" y="525" text-anchor="middle" class="decision" fill="white">‚úÖ Generate</text>
  <text x="975" y="545" text-anchor="middle" class="decision" fill="white">Final Response</text>

  <!-- Error Handling -->
  <rect x="900" y="600" width="150" height="80" rx="10" fill="#DC3545" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="975" y="625" text-anchor="middle" class="decision" fill="white">‚ùå Error</text>
  <text x="975" y="645" text-anchor="middle" class="decision" fill="white">Recovery</text>

  <!-- Memory -->
  <rect x="50" y="500" width="150" height="100" rx="15" fill="#808080" stroke="#333" stroke-width="2" filter="url(#shadow)" opacity="0.8"/>
  <text x="125" y="525" text-anchor="middle" class="decision" fill="white">üíæ Memory</text>
  <text x="125" y="545" text-anchor="middle" class="action" fill="white">‚Ä¢ Conversation</text>
  <text x="125" y="560" text-anchor="middle" class="action" fill="white">‚Ä¢ Tools Used</text>
  <text x="125" y="575" text-anchor="middle" class="action" fill="white">‚Ä¢ Results</text>
  <text x="125" y="590" text-anchor="middle" class="action" fill="white">‚Ä¢ Context</text>

  <!-- Decision Criteria Boxes -->
  <rect x="50" y="250" width="120" height="120" rx="5" fill="#f8f9fa" stroke="#666" stroke-width="1" stroke-dasharray="2,2"/>
  <text x="110" y="275" text-anchor="middle" class="process" font-weight="bold">Query Types:</text>
  <text x="110" y="290" text-anchor="middle" class="process">‚Ä¢ Mathematical</text>
  <text x="110" y="305" text-anchor="middle" class="process">‚Ä¢ Factual</text>
  <text x="110" y="320" text-anchor="middle" class="process">‚Ä¢ Data Retrieval</text>
  <text x="110" y="335" text-anchor="middle" class="process">‚Ä¢ API Integration</text>
  <text x="110" y="350" text-anchor="middle" class="process">‚Ä¢ Multi-step</text>
  <text x="110" y="365" text-anchor="middle" class="process">‚Ä¢ Complex</text>

  <rect x="50" y="400" width="120" height="80" rx="5" fill="#f8f9fa" stroke="#666" stroke-width="1" stroke-dasharray="2,2"/>
  <text x="110" y="425" text-anchor="middle" class="process" font-weight="bold">Success Factors:</text>
  <text x="110" y="445" text-anchor="middle" class="process">‚Ä¢ Accurate Tools</text>
  <text x="110" y="460" text-anchor="middle" class="process">‚Ä¢ Proper Sequence</text>
  <text x="110" y="475" text-anchor="middle" class="process">‚Ä¢ Error Handling</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#70AD47"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#DC3545"/>
    </marker>
  </defs>

  <!-- Main flow -->
  <line x1="160" y1="150" x2="120" y2="150" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="280" y1="150" x2="320" y2="150" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="480" y1="150" x2="520" y2="150" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="680" y1="150" x2="680" y2="220" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Tool selection arrows -->
  <line x1="680" y1="250" x2="700" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="680" y1="270" x2="850" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="680" y1="290" x2="700" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="680" y1="310" x2="850" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowhead-green)"/>

  <!-- Result processing -->
  <line x1="770" y1="330" x2="650" y2="460" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="920" y1="330" x2="550" y2="480" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Success check -->
  <line x1="600" y1="540" x2="620" y2="530" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="780" y1="530" x2="900" y2="530" stroke="#333" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Loop back -->
  <path d="M 975 580 Q 900 650 780 530" stroke="#FF6B35" stroke-width="4" fill="none" marker-end="url(#arrowhead-red)" stroke-dasharray="5,5"/>
  <text x="850" y="620" text-anchor="middle" class="process" fill="#FF6B35" font-weight="bold">Retry/Alternative</text>

  <!-- Memory connections -->
  <line x1="200" y1="150" x2="150" y2="200" stroke="#808080" stroke-width="2" stroke-dasharray="3,3"/>
  <line x1="500" y1="580" x2="200" y2="560" stroke="#808080" stroke-width="2" stroke-dasharray="3,3"/>
  <line x1="200" y1="590" x2="150" y2="600" stroke="#808080" stroke-width="2" stroke-dasharray="3,3"/>

  <!-- Label arrows -->
  <text x="240" y="130" text-anchor="middle" class="process" fill="#666">Parse</text>
  <text x="440" y="130" text-anchor="middle" class="process" fill="#666">Choose Tools</text>
  <text x="640" y="130" text-anchor="middle" class="process" fill="#666">Execute</text>

  <!-- End -->
  <ellipse cx="975" cy="650" rx="60" ry="30" fill="#2E75B6" stroke="#333" stroke-width="2" filter="url(#shadow)"/>
  <text x="975" y="655" text-anchor="middle" class="decision" fill="white">END</text>
</svg>